<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Erfassung{% endblock %}</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
<header class="timetac-header">
    <div class="timetac-header__brand">
        <span class="timetac-header__logo" aria-hidden="true">⌚</span>
        <span class="timetac-header__title">Erfassung</span>
        <span class="timetac-header__version">v{{ app_version }}</span>
    </div>
    {% if user %}
    <nav class="timetac-header__nav" aria-label="Hauptnavigation">
        <a href="/dashboard" class="timetac-nav-link {% if request.url.path == '/dashboard' %}is-active{% endif %}">
            <span class="timetac-nav-link__icon" aria-hidden="true">🏠</span>
            <span>Dashboard</span>
        </a>
        <a href="/records" class="timetac-nav-link {% if request.url.path.startswith('/records') %}is-active{% endif %}">
            <span class="timetac-nav-link__icon" aria-hidden="true">🗂️</span>
            <span>Buchungen &amp; Urlaub</span>
        </a>
        {% if user.group and user.group.is_admin %}
        <a href="/admin" class="timetac-nav-link {% if request.url.path.startswith('/admin') %}is-active{% endif %}">
            <span class="timetac-nav-link__icon" aria-hidden="true">⚙️</span>
            <span>Administration</span>
        </a>
        {% endif %}
    </nav>
    <div class="timetac-header__profile">
        <div class="timetac-header__user">
            <span class="timetac-header__name">{{ user.full_name }}</span>
            <small class="timetac-header__group">{{ user.group.name if user.group else 'ohne Gruppe' }}</small>
        </div>
        <a class="timetac-header__logout" href="/logout">Abmelden</a>
    </div>
    {% endif %}
</header>
<main class="page">
    {% if message %}
        <div class="alert alert-success">{{ message }}</div>
    {% endif %}
    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    {% block content %}{% endblock %}
</main>
<footer class="page-footer">
    <p>Erfassung v{{ app_version }} &copy; {{ now().year }}</p>
</footer>
</body>
</html>
